<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Gojo Platformer Minimalista</title>
  <style>
    html, body { height: 100%; margin: 0; background: #191c24; }
    body { display: flex; flex-direction: column; align-items: center; }
    #game { background: #222; position: relative; width: 720px; height: 400px; margin: 24px 0 0 0; }
    .player, .enemy { position: absolute; }
    .player { width: 32px; height: 48px; background: #59f; border-radius: 8px; border:2px solid #fff; }
    .enemy { width: 32px; height: 32px; background: #f55; border-radius: 8px; }
    .life-bar, .awk-bar { height: 6px; border-radius: 3px; background: #444; overflow: hidden; }
    .life { height: 100%; background: #0f0; }
    .awk { height: 100%; background: linear-gradient(90deg,#aaf,#80f); }
    #hud { display: flex; gap: 8px; margin-top: 8px; }
    .skill-box { background: #222; color: #fff; font-size: 14px; width: 90px; height: 44px; display: flex; flex-direction: column; justify-content: center; align-items: center; border: 2px solid #555; border-radius: 8px; position: relative;}
    .skill-box.cooldown { background: #333; color: #aaa; }
    .skill-key { font-weight: bold; font-size: 16px; }
    .skill-cd { font-size: 13px; color: #0ff; }
    #awkbar-container { width: 350px; margin: 8px auto 0 auto; }
    #awkmeter { font-size: 14px; color: #fff; text-align: center; margin-top: 2px; }
    #gprompt { color: #ff0; font-size: 18px; text-align:center; margin-top: 5px; }
    #ult { color:#f4f; font-weight:bold; font-size:18px; text-align:center;}
    #info {color:#fff;font-size:13px;margin-top:10px;}
  </style>
</head>
<body>
  <div id="hud"></div>
  <div id="game"></div>
  <div id="awkbar-container">
    <div class="awk-bar"><div id="awkbar" class="awk" style="width:0%"></div></div>
    <div id="awkmeter">AWK: 0/100</div>
    <div id="gprompt"></div>
    <div id="ult"></div>
  </div>
  <div id="info">
    Mover: A/D | Pular: W | Skills: 1(Azul), 2(Vermelho), 3(Infinito), 4(Socos),<br>
    R (modo skill) | G (Acordar) | Espaço (ataque normal)
  </div>
  <script>
  // --- CONSTANTES ---
  const SKILLS_BASE = [
    { nome: "Azul", tecla: "1", cooldown: 5, desc: "Puxa e stuna inimigo, R: chute." },
    { nome: "Vermelho", tecla: "2", cooldown: 6, desc: "Esfera explode, R: teleporta atrás e lança bola." },
    { nome: "Infinito", tecla: "3", cooldown: 8, desc: "Barreira: inimigos lentos próximos." },
    { nome: "Soco Rápido", tecla: "4", cooldown: 7, desc: "Sequência de 5 socos + knockback." }
  ];
  const SKILLS_AWK = [
    { nome: "Azul Máximo", tecla: "1", cooldown: 6, desc: "Esfera gira 3x, sobe ao céu." },
    { nome: "Vermelho Máximo", tecla: "2", cooldown: 8, desc: "Feixe forte, R: bola volta e soco com faíscas." },
    { nome: "Vazio Roxo", tecla: "3", cooldown: 12, desc: "Bola roxa cresce se segurar." },
    { nome: "Vazio Infinito", tecla: "4", cooldown: 20, desc: "Campo paralisa inimigos por 10s." }
  ];
  const WIDTH = 720, HEIGHT = 400, GROUND = HEIGHT-32, GRAV = 0.9;
  // --- ESTADO ---
  let player = {
    x: 120, y: GROUND-48, vx: 0, vy: 0, w:32, h:48, face:1, grounded:true,
    awk:0, maxAwk:100, awakened:false, skills:[0,0,0,0], skillR:false, ultStatus:"",
    canAtk:true, skillDesc:"", atkCD:0
  };
  let enemies = [];
  let lastSkill = 0, tick = 0;
  // --- UTILS ---
  function clamp(v,a,b){return Math.max(a,Math.min(b,v));}
  function dist(a,b){return Math.abs(a.x+16-b.x-16);}
  // --- INICIAR HUD ---
  function renderHUD(){
    let skills = player.awakened ? SKILLS_AWK : SKILLS_BASE;
    let hud = "";
    for(let i=0;i<4;i++){
      hud += `<div class="skill-box${player.skills[i]>0?" cooldown":""}">
        <div class="skill-key">${skills[i].tecla} - ${skills[i].nome}</div>
        <div class="skill-cd">${player.skills[i]>0?player.skills[i].toFixed(1)+"s":"Pronto"}</div>
      </div>`;
    }
    document.getElementById("hud").innerHTML = hud;
  }
  // --- INICIAR INIMIGOS ---
  function spawnEnemy(x,y){
    enemies.push({
      x:x, y:y, vx:-1, vy:0, w:32, h:32, life:100, maxLife:100, stunned:0, slow:0, immobile:0
    });
  }
  // --- DESENHAR JOGO ---
  function renderGame(){
    let game = document.getElementById("game");
    game.innerHTML = "";
    // player
    let pl = document.createElement("div");
    pl.className="player";
    pl.style.left = player.x+"px";
    pl.style.top = player.y+"px";
    game.appendChild(pl);
    // enemies
    for(let e of enemies){
      let en = document.createElement("div");
      en.className="enemy";
      en.style.left = e.x+"px";
      en.style.top = e.y+"px";
      if(e.immobile>0) en.style.background="#fff";
      else if(e.stunned>0) en.style.background="#ff0";
      else if(e.slow>0) en.style.background="#0ff";
      // barra vida
      let bar = document.createElement("div");
      bar.className="life-bar";
      bar.style.width="32px";bar.style.marginTop="-8px";
      let lif = document.createElement("div");
      lif.className="life";
      lif.style.width = (e.life/e.maxLife*100)+"%";
      bar.appendChild(lif);
      en.appendChild(bar);
      game.appendChild(en);
    }
    // Awk bar
    let awk = clamp(player.awk,0,player.maxAwk);
    document.getElementById("awkbar").style.width = (awk/player.maxAwk*100)+"%";
    document.getElementById("awkmeter").innerText = "AWK: "+Math.floor(awk)+"/"+player.maxAwk;
    renderHUD();
    // Prompt G
    document.getElementById("gprompt").innerHTML = (!player.awakened && awk>=player.maxAwk) ? "Aperte <b>G</b> para Acordar!" : "";
    document.getElementById("ult").innerHTML = player.awakened ? "Modo AWAKENED!" : "";
  }
  // --- LÓGICA PRINCIPAL ---
  function gameLoop(){
    // física player
    player.vy += GRAV;
    player.y += player.vy;
    if(player.y+player.h>=GROUND){ player.y=GROUND-player.h; player.vy=0; player.grounded=true; } else player.grounded=false;
    player.x += player.vx;
    player.x = clamp(player.x,0,WIDTH-player.w);
    player.vx *= 0.8;
    // skills cooldown
    for(let i=0;i<4;i++) if(player.skills[i]>0) player.skills[i]=Math.max(0,player.skills[i]-0.02);
    // atk cooldown
    if(player.atkCD>0) player.atkCD-=0.02;
    // inimigos
    for(let e of enemies){
      // status
      if(e.stunned>0) e.stunned-=0.02;
      if(e.slow>0) e.slow-=0.02;
      if(e.immobile>0) e.immobile-=0.02;
      // move
      if(e.immobile<=0 && e.stunned<=0){
        let dir = player.x>e.x?1:-1;
        e.vx = dir*(e.slow>0?-0.6:-1.5);
        e.x += e.vx;
        if(e.x < 0) e.x=0;
        if(e.x > WIDTH-e.w) e.x=WIDTH-e.w;
      }
    }
    // remove mortos
    enemies = enemies.filter(e=>e.life>0);
    // render
    renderGame();
    tick+=1;
    requestAnimationFrame(gameLoop);
  }
  // --- COLISÃO PLAYER-ENEMY ---
  function enemyNear(range=60){
    return enemies.find(e=>dist(player,e)<range);
  }
  // --- ATAQUE NORMAL ---
  function atkNormal(){
    if(player.atkCD>0) return;
    let e = enemyNear(40);
    if(e){ e.life-=10;player.awk+=5;}
    player.atkCD=0.5;
  }
  // --- SKILLS BASE ---
  function skillAzul(){
    if(player.skills[0]>0) return;
    let e = enemyNear(120);
    if(e){
      e.x = clamp(player.x+player.face*48,0,WIDTH-e.w); // puxa para perto
      e.stunned=1.8;
      player.skills[0]=SKILLS_BASE[0].cooldown;
      player.skillR="azul";
    }
  }
  function skillAzulR(){
    let e = enemyNear(48);
    if(e&&e.stunned>0){
      e.vx = player.face*12; e.stunned=0; e.life-=18; player.skillR=false;
    }
  }
  function skillVermelho(){
    if(player.skills[1]>0) return;
    let e = enemyNear(160);
    if(e){
      // esfera vermelha
      e.life-=22; player.awk+=8;
      player.skills[1]=SKILLS_BASE[1].cooldown;
      player.skillR="vermelho";
    }
  }
  function skillVermelhoR(){
    let e = enemyNear(160);
    if(e){
      player.x = clamp(e.x-36,0,WIDTH-player.w);
      player.y = clamp(e.y-12,GOUND-90,GROUND-player.h);
      e.life-=16;
      player.skillR=false;
    }
  }
  function skillInfinito(){
    if(player.skills[2]>0) return;
    for(let e of enemies) if(dist(player,e)<100) e.slow=3;
    player.skills[2]=SKILLS_BASE[2].cooldown;
  }
  function skillSocos(){
    if(player.skills[3]>0) return;
    let e = enemyNear(60);
    if(e){
      e.life-=30; player.awk+=12;
      e.vx = player.face*10;
      player.skills[3]=SKILLS_BASE[3].cooldown;
    }
  }
  // --- TELEPORTE BASE ---
  function skillTeleport(){
    let e = enemyNear(180);
    if(e){
      player.x = clamp(e.x-36,0,WIDTH-player.w);
      player.y = clamp(e.y-12,GOUND-90,GROUND-player.h);
    }
  }
  // --- AWAKENED ---
  function skillAzulMAX(){
    if(player.skills[0]>0) return;
    // esfera gira 3x
    let e = enemyNear(100);
    if(e){ e.stunned=2.5; e.life-=22; }
    player.skills[0]=SKILLS_AWK[0].cooldown;
    player.ultStatus="azul_no_ceu";
    setTimeout(()=>{player.ultStatus="";},2200);
  }
  function skillVermelhoMAX(){
    if(player.skills[1]>0) return;
    let e = enemyNear(160);
    if(e){
      e.life-=38; player.awk+=15;
      player.skills[1]=SKILLS_AWK[1].cooldown;
      player.skillR="vmax";
      if(player.ultStatus=="azul_no_ceu"){
        e.life-=50; // Interação: azul+vermelho=explosão roxa
        player.ultStatus="";
      }
    }
  }
  function skillVermelhoMAX_R(){
    let e = enemyNear(160);
    if(e){
      setTimeout(()=>{e.life-=30;e.x=player.x;},3100);
      player.skillR=false;
    }
  }
  function skillVazioRoxo(hold){
    if(player.skills[2]>0) return;
    let e = enemyNear(100);
    if(e){
      e.life-=hold?40:22;
      player.skills[2]=SKILLS_AWK[2].cooldown;
    }
  }
  function skillVazioInfinito(){
    if(player.skills[3]>0) return;
    for(let e of enemies) if(dist(player,e)<160) e.immobile=10;
    player.skills[3]=SKILLS_AWK[3].cooldown;
  }
  // --- CONTROLES ---
  document.addEventListener("keydown",e=>{
    if(e.repeat) return;
    if(e.key=="a") player.vx=-4,player.face=-1;
    if(e.key=="d") player.vx=4,player.face=1;
    if(e.key=="w" && player.grounded) player.vy=-13;
    if(e.key==" ") atkNormal();
    // skills base
    if(!player.awakened){
      if(e.key=="1") skillAzul();
      if(e.key=="2") skillVermelho();
      if(e.key=="3") skillInfinito();
      if(e.key=="4") skillSocos();
      if(e.key=="r"){
        if(player.skillR=="azul") skillAzulR();
        if(player.skillR=="vermelho") skillVermelhoR();
        skillTeleport();
      }
    }
    // skills awakened
    else{
      if(e.key=="1") skillAzulMAX();
      if(e.key=="2") skillVermelhoMAX();
      if(e.key=="3") skillVazioRoxo(false);
      if(e.key=="4") skillVazioInfinito();
      if(e.key=="r"){
        if(player.skillR=="vmax") skillVermelhoMAX_R();
        skillTeleport();
      }
    }
    if(e.key=="g" && player.awk>=player.maxAwk && !player.awakened){
      player.awakened=true; player.awk=0;
    }
  });
  // Vazio Roxo (hold)
  document.addEventListener("keyup",e=>{
    if(player.awakened && e.key=="3") skillVazioRoxo(true);
  });
  // --- SPAWN INIMIGOS PERIODICAMENTE ---
  setInterval(()=>{
    if(enemies.length<3){
      let rx = Math.random()*(WIDTH-32);
      spawnEnemy(rx,GROUND-32);
    }
  }, 2000);
  // --- INICIAR JOGO ---
  renderHUD();
  renderGame();
  gameLoop();
  </script>
</body>
</html>
