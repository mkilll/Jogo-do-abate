<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Gojo Platformer</title>
  <style>
    body { background: #222; margin: 0; overflow: hidden; }
    #gameCanvas {
      background: linear-gradient(to top, #05182d 80%, #b1eaff 100%);
      display: block;
      margin: 0 auto;
      border: 3px solid #111;
      box-shadow: 0 0 30px #000b;
    }
    #hint {
      position: absolute; top: 14px; left: 50%; transform: translateX(-50%);
      color: #fff; background: #191c; padding: 8px 22px; border-radius: 8px; font-size: 18px;
      font-family: sans-serif; letter-spacing: 1px;
      user-select: none; pointer-events: none;
    }
  </style>
</head>
<body>
  <div id="hint">Use ← → para andar, espaço para pular</div>
  <canvas id="gameCanvas" width="600" height="320"></canvas>
  <script>
    // Spritesheet do Gojo (direita, esquerda, idle, pulo) - pixel art simples
    // Recomendo substituir pelos seus próprios sprites PNG em sequence!
    const gojoSprites = {
      idle: [
        // 32x48 px cada frame, idle (parado)
        "https://raw.githubusercontent.com/mkilll/Jogo-do-abate/main/sprites/gojo_idle1.png",
        "https://raw.githubusercontent.com/mkilll/Jogo-do-abate/main/sprites/gojo_idle2.png"
      ],
      walkRight: [
        "https://raw.githubusercontent.com/mkilll/Jogo-do-abate/main/sprites/gojo_walk1.png",
        "https://raw.githubusercontent.com/mkilll/Jogo-do-abate/main/sprites/gojo_walk2.png"
      ],
      walkLeft: [
        "https://raw.githubusercontent.com/mkilll/Jogo-do-abate/main/sprites/gojo_walk1_left.png",
        "https://raw.githubusercontent.com/mkilll/Jogo-do-abate/main/sprites/gojo_walk2_left.png"
      ],
      jump: [
        "https://raw.githubusercontent.com/mkilll/Jogo-do-abate/main/sprites/gojo_jump.png"
      ]
    };

    // Carregamento dos sprites
    let loadedSprites = {};
    let spritesToLoad = 0, spritesLoaded = 0;
    function preloadSprites(callback) {
      const keys = Object.keys(gojoSprites);
      spritesToLoad = keys.reduce((sum, k) => sum + gojoSprites[k].length, 0);
      spritesLoaded = 0;
      keys.forEach(key => {
        loadedSprites[key] = [];
        gojoSprites[key].forEach((url, idx) => {
          const img = new Image();
          img.onload = () => {
            loadedSprites[key][idx] = img;
            spritesLoaded++;
            if (spritesLoaded === spritesToLoad) callback();
          };
          img.onerror = () => {
            // Mostra um retângulo colorido caso não carregue
            const canvas = document.createElement('canvas');
            canvas.width = 32; canvas.height = 48;
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = "#fff"; ctx.fillRect(0,0,32,48);
            ctx.fillStyle = "#1e6fff"; ctx.fillRect(4,16,24,28);
            ctx.fillStyle = "#111"; ctx.fillRect(8,22,16,10);
            loadedSprites[key][idx] = canvas;
            spritesLoaded++;
            if (spritesLoaded === spritesToLoad) callback();
          };
          img.src = url;
        });
      });
    }

    // Variáveis do jogo
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const GRAVITY = 0.7;
    const GROUND_Y = 256;
    const PLAYER = {
      x: 100, y: GROUND_Y, vx: 0, vy: 0,
      w: 32, h: 48,
      speed: 2.2, jumpPower: 11,
      dir: 1, // 1 = direita, -1 = esquerda
      grounded: true,
      animTimer: 0,
      animFrame: 0,
      state: "idle" // idle, walkRight, walkLeft, jump
    };

    // Input
    let keys = {};
    document.addEventListener('keydown', e => {
      if (["ArrowLeft","ArrowRight"," "].includes(e.key)) e.preventDefault();
      keys[e.key] = true;
    });
    document.addEventListener('keyup', e => {
      keys[e.key] = false;
    });

    // Lógica principal
    function gameLoop() {
      // Lógica de movimentação
      if (keys["ArrowLeft"]) {
        PLAYER.vx = -PLAYER.speed;
        PLAYER.dir = -1;
        if (PLAYER.grounded) PLAYER.state = "walkLeft";
      } else if (keys["ArrowRight"]) {
        PLAYER.vx = PLAYER.speed;
        PLAYER.dir = 1;
        if (PLAYER.grounded) PLAYER.state = "walkRight";
      } else {
        PLAYER.vx = 0;
        if (PLAYER.grounded) PLAYER.state = "idle";
      }
      // Pulo
      if ((keys[" "] || keys["ArrowUp"]) && PLAYER.grounded) {
        PLAYER.vy = -PLAYER.jumpPower;
        PLAYER.grounded = false;
        PLAYER.state = "jump";
      }

      // Física
      PLAYER.x += PLAYER.vx;
      PLAYER.y += PLAYER.vy;
      if (!PLAYER.grounded) PLAYER.vy += GRAVITY;
      // Chão
      if (PLAYER.y >= GROUND_Y) {
        PLAYER.y = GROUND_Y;
        PLAYER.vy = 0;
        PLAYER.grounded = true;
        if (PLAYER.vx === 0) PLAYER.state = "idle";
        else PLAYER.state = PLAYER.dir === 1 ? "walkRight" : "walkLeft";
      }
      // Limites laterais
      PLAYER.x = Math.max(0, Math.min(canvas.width-PLAYER.w, PLAYER.x));

      // Animação
      PLAYER.animTimer++;
      if (PLAYER.state === "idle") {
        if (PLAYER.animTimer % 20 === 0) PLAYER.animFrame = (PLAYER.animFrame+1)%loadedSprites.idle.length;
      } else if (PLAYER.state === "walkRight" || PLAYER.state === "walkLeft") {
        if (PLAYER.animTimer % 8 === 0) PLAYER.animFrame = (PLAYER.animFrame+1)%loadedSprites.walkRight.length;
      } else if (PLAYER.state === "jump") {
        PLAYER.animFrame = 0;
      }
      // Desenho
      draw();
      requestAnimationFrame(gameLoop);
    }

    // Draw
    function draw() {
      // Fundo
      ctx.clearRect(0,0,canvas.width,canvas.height);
      // Chão
      ctx.fillStyle = "#4db04d";
      ctx.fillRect(0, GROUND_Y+PLAYER.h-8, canvas.width, 40);

      // Sombra
      ctx.save();
      ctx.globalAlpha = 0.21;
      ctx.beginPath();
      ctx.ellipse(PLAYER.x+PLAYER.w/2, GROUND_Y+PLAYER.h-2, 18, 7, 0,0,Math.PI*2);
      ctx.fillStyle = "#000";
      ctx.fill();
      ctx.restore();

      // Jogador (Gojo)
      let sprite;
      if (PLAYER.state === "idle") sprite = loadedSprites.idle[PLAYER.animFrame];
      else if (PLAYER.state === "walkRight") sprite = loadedSprites.walkRight[PLAYER.animFrame];
      else if (PLAYER.state === "walkLeft") sprite = loadedSprites.walkLeft[PLAYER.animFrame];
      else if (PLAYER.state === "jump") sprite = loadedSprites.jump[0];
      else sprite = loadedSprites.idle[0];

      ctx.drawImage(sprite, PLAYER.x, PLAYER.y, PLAYER.w, PLAYER.h);

      // Nome
      ctx.font = "bold 18px Arial";
      ctx.fillStyle = "#fff";
      ctx.strokeStyle = "#222";
      ctx.lineWidth = 3;
      ctx.strokeText("Gojo", PLAYER.x+2, PLAYER.y-6);
      ctx.fillText("Gojo", PLAYER.x+2, PLAYER.y-6);
    }

    // Iniciar depois de sprites carregados
    preloadSprites(() => {
      requestAnimationFrame(gameLoop);
    });
  </script>
</body>
</html>
